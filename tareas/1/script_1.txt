create database libreria_mi_bendicion;

use libreria_mi_bendicion;

create table editorial(
    rif varchar(10) primary key,
    nombre_e varchar(50),
    dir_fiscal varchar(255),
    email_e varchar(254),
    tel_e varchar(15)
);

create table seccion(
    cod_s int(10) primary key,
    nombre_s varchar(50)
);

create table datos_personales(
    ced varchar(20) primary key,
    nombre varchar(50),
    apellido varchar(50),
    tel_dp varchar(15),
    direccion varchar(50),
    email varchar(50)
);

create table libro(
    cod_l int(10) primary key,
    titulo varchar(50),
    fecha_pub date,
    descripcion varchar(50),
    cantidad_l int(10),
    precio double(5,2),
    rif_fk varchar(10),
    cod_s_fk int(10),
    index(rif_fk),
    index(cod_s_fk),
    foreign key(rif_fk) references editorial(rif),
    foreign key(cod_s_fk) references seccion(cod_s)
);

create table autor_libro(
    ced_a_fk varchar(20),
    cod_l_fk int(10),
    index(ced_a_fk),
    index(cod_l_fk),
    foreign key(ced_a_fk) references datos_personales(ced),
    foreign key(cod_l_fk) references libro(cod_l)
);

create table metodo_pago(
    cod_mp int(10) primary key,
    moneda_nacional int(1),
    divisas int (1),
    pago_linea int(1)
);

create table compra_cliente(
   cod_cc int(10) primary key,
   ced_c_fk varchar(20),
   cod_mp_fk int(10),
   index(ced_c_fk),
   index(cod_mp_fk),
   foreign key(ced_c_fk) references datos_personales(ced),
   foreign key(cod_mp_fk) references metodo_pago(cod_mp)
);

create table venta_libro(
    cod_cc_fk int(10),
    cod_l_fk int(10),
    cantidad_vl int(10),
    index(cod_cc_fk),
    index(cod_l_fk),
    foreign key(cod_cc_fk) references compra_cliente(cod_cc),
    foreign key(cod_l_fk) references libro(cod_l)
);
